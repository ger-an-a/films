## Простой агрегатор фильмов (Тестовое задание).

### [Базовый URL: http://a0890986.xsph.ru/](http://a0890986.xsph.ru/)

### Возможности: 
- Добавить фильм;
- Получить N фильмов, отсортированных по имени, с пагинацией;

### Как пользоваться:

#### Добавление фильма:
- Используется метод POST. Content-Type: application/json;
- Для выложенного на хостинг API базовый url [http://a0890986.xsph.ru/](http://a0890986.xsph.ru/);
- В теле запроса должен быть объект с полями "title", "img", "about" и "author". "title" - содержит название (обязательное поле), "img" - содержит ссылку на изображение, "about" - содержит описание и "author" - содержит имя режиссера (обязательное поле);
Пример:
````
{
    "title": "Название фильма",
    "img": "http://link-to-image.ru/",
    "about": "Очень интересный фильм",
    "author": "Самый лучший режиссер"
}
````
- Фильмы с одинаковым названием и автором считаются дубликатами;
- При попытке добавить дубликат вернется сообщение с уже имеющейся записью;
- Ссылка на изображение проверяется на то, что это ссылка;
- При успешном добавлении ответ содержит массив с добавленной записью.

Пример ответа:
````
Array[
    {
        "id": 106,
        "title": "Название",
        "img": "http://qwerty.ru/",
        "about": "Очень интересный фильм",
        "author": "Лучший режиссер"
    }
]
````

#### Получение фильмов:
- Используется метод GET;
- Запрос отправляется на http://a0890986.xsph.ru/?count={свое-число-фильмов}&page={страница}
Вместо {свое-число-фильмов} и {страница} необходимо вставить соответствующие значения
Пример: 
````
 http://a0890986.xsph.ru/?count=2&page=1 
````

Пример ответа:
````
[
    {
        "id": 64,
        "title": "",
        "img": "https://kinopoiskapiunofficial.tech/images/posters/kp/565148.jpg",
        "about": "Живое выступление группы Radiohead в эфире канала VH1.",
        "author": "Дэвид Барнард"
    },
    {
        "id": 34,
        "title": "1+1",
        "img": "https://kinopoiskapiunofficial.tech/images/posters/kp/535341.jpg",
        "about": "Пострадав в результате несчастного случая, богатый аристократ Филипп нанимает в помощники человека, который менее всего подходит для этой работы, – молодого жителя предместья Дрисса, только что освободившегося из тюрьмы. Несмотря на то, что Филипп прикован к инвалидному креслу, Дриссу удается привнести в размеренную жизнь аристократа дух приключений.",
        "author": "Оливье Накаш"
    }
]
````

### Как запустить на локальном сервере (php + mySQL):
- Добавить все файлы в директорию на вашем сервере;
- Поменять данные для соединения с базой в файле /config/config.php на свои.
Пример:
````
    // ПАРАМЕТРЫ БД
    $host = 'localhost:8889'; // свои хост и порт в формате host:port
    $dbname = 'films'; //название базы данных
    $user = 'root'; //пользователь
    $password = 'root'; //пароль
````
- Поменять данные для соединения по API в /config/config.php на свои.
Пример:
````
    // ПАРАМЕТРЫ API (поменять ключ, если привышен суточный лимит запросов)
    $api_key = '5310540a-3f15-48b3-815e-9c449c9339da'; //свой ключ, полученный при регистрации на https://kinopoiskapiunofficial.tech
````
- Запустить сервер;
- При первом запросе в вашей базе будет создана таблица 'films' и загружены фильмы с API. Это займет некоторое время.
